(self.webpackChunkcdfang_spider=self.webpackChunkcdfang_spider||[]).push([[826],{6606:(e,t,n)=>{"use strict";n.d(t,{n:()=>l,V:()=>o});var r=n(3804),a=n.n(r),u=n(8797),c=n(5734),i=a().useContext,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"300px";function n(n){return i(c.I).isLoading?a().createElement(u.Z,{height:t,tip:"加载中..."}):a().createElement(e,n)}return n};function o(e,t){return t?a().createElement(u.Z,{tip:"加载中..."}):e}},1444:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(3804),a=n.n(r);const u=function(e){var t=e.name,n=e.city,r=void 0===n?"510100":n;return a().createElement("a",{href:"https://www.amap.com/search?query=".concat(t,"&city=").concat(r),target:"_blank",rel:"nofollow me noopener noreferrer"},t)}},8797:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c}),n(9405);var r=n(9552),a=n(3804),u=n.n(a);const c=function(e){var t=e.height,n=void 0===t?"50px":t,a=e.tip,c=void 0===a?"":a;return u().createElement("div",{className:"common-loading",style:{lineHeight:n,height:n}},u().createElement(r.default,{tip:c}))}},4622:(e,t,n)=>{"use strict";n.d(t,{pl:()=>r,$W:()=>a,q1:()=>u,Kd:()=>c,si:()=>i,Hx:()=>l,J2:()=>o,TX:()=>s,lL:()=>m,cX:()=>d,Oo:()=>f});var r="房源数",a="楼盘数",u="区域",c="https://github.com/mengsixing/cdfang-spider",i="Copyright 2021 mengsixing. All Rights Reserved",l="蜀ICP备17036475号-2",o="#5eba00",s="#cd201f",m="页面加载中...",d="http://zw.cdzj.chengdu.gov.cn/lottery/accept/index",f={2020:"/2020",2019:"/2019",2018:"/2018",2017:"/2017",home:"/","/2020":"2020","/2019":"2019","/2018":"2018","/2017":"2017","/":"home"}},5734:(e,t,n)=>{"use strict";n.d(t,{I:()=>u});var r=n(3804),a={allData:[],activityKey:"天府新区",selectedYear:0,isLoading:!1,changeData:function(){},changeActivityKey:function(){},changeSelectedYear:function(){},changeLoading:function(){}},u=n.n(r)().createContext(a)},2471:(e,t,n)=>{"use strict";var r=n(3804),a=n.n(r),u=n(7196),c=n.n(u),i=n(3727),l=n(8797),o=n(3038),s=n.n(o),m=n(9713),d=n.n(m),f=n(5734);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const g=function(e){var t=e.children,n={allData:[],activityKey:"天府新区",selectedYear:0,isLoading:!1,changeData:function(e){l((function(t){return b(b({},t),{},{allData:e})}))},changeActivityKey:function(e){l((function(t){return b(b({},t),{},{activityKey:e})}))},changeSelectedYear:function(e){l((function(t){return b(b({},t),{},{selectedYear:e})}))},changeLoading:function(e){l((function(t){return b(b({},t),{},{isLoading:e})}))}},u=(0,r.useState)(n),c=s()(u,2),i=c[0],l=c[1];return a().createElement(f.I.Provider,{value:i},t)};var p=n(4622),E=n(5977),y=(n(467),n(9106)),v=(n(8136),n(5789)),O=(n(3431),n(4331)),N=(n(4230),n(1350));const x=_;var T=n.n(x),k=n(7484),I=n.n(k);function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I()();switch(e.month()){case 0:case 1:case 2:return{thisQuarterStart:e.set("month",0).startOf("month"),thisQuarterEnd:e.set("month",2).startOf("month")};case 3:case 4:case 5:return{thisQuarterStart:e.set("month",3).startOf("month"),thisQuarterEnd:e.set("month",5).startOf("month")};case 6:case 7:case 8:return{thisQuarterStart:e.set("month",6).startOf("month"),thisQuarterEnd:e.set("month",8).startOf("month")};case 9:case 10:case 11:return{thisQuarterStart:e.set("month",9).startOf("month"),thisQuarterEnd:e.set("month",11).startOf("month")};default:return{thisQuarterStart:e.set("month",0).startOf("month"),thisQuarterEnd:e.set("month",2).startOf("month")}}}function j(e){return e>0?"".concat(e,"↑"):0===e?"持平":"".concat(e,"↓")}const w={getAllInfo:function(e){return{houseNumber:T().sumBy(e,"number"),buildNumber:e.length}},getThisWeekInfo:function(e){var t=I()().set("day",0),n=I()().set("day",7),r=T().filter(e,(function(e){var r=I()(e.beginTime);return r>t&&r<n})),a=T().sumBy(r,"number"),u=r.length,c=this.getLastWeekInfo(e),i=a-c.houseNumber,l=u-c.buildNumber;return{houseNumber:a,buildNumber:u,increaseHouseNumber:i,increaseBuildNumber:l,increaseHouseNumberString:j(i),increaseBuildNumberString:j(l)}},getThisMonthInfo:function(e){var t=I()().startOf("month"),n=I()().endOf("month"),r=T().filter(e,(function(e){var r=I()(e.beginTime);return r>t&&r<n})),a=T().sumBy(r,"number"),u=r.length,c=this.getLastMonthInfo(e),i=a-c.houseNumber,l=u-c.buildNumber;return{houseNumber:a,buildNumber:u,increaseHouseNumber:i,increaseBuildNumber:l,increaseHouseNumberString:j(i),increaseBuildNumberString:j(l)}},getThisQuarterInfo:function(e){var t=D(),n=t.thisQuarterStart,r=t.thisQuarterEnd,a=T().filter(e,(function(e){var t=I()(e.beginTime);return t>n&&t<r})),u=T().sumBy(a,"number"),c=a.length,i=this.getLastQuarterInfo(e),l=u-i.houseNumber,o=c-i.buildNumber;return{houseNumber:u,buildNumber:c,increaseHouseNumber:l,increaseBuildNumber:o,increaseHouseNumberString:j(l),increaseBuildNumberString:j(o)}},getLastWeekInfo:function(e){var t=I()().set("day",0).add(-7,"day"),n=I()().set("day",7).add(-7,"day"),r=T().filter(e,(function(e){var r=I()(e.beginTime);return r>t&&r<n}));return{houseNumber:T().sumBy(r,"number"),buildNumber:r.length}},getLastMonthInfo:function(e){var t=I()().add(-1,"month").startOf("month"),n=I()().add(-1,"month").endOf("month"),r=T().filter(e,(function(e){var r=I()(e.beginTime);return r>t&&r<n}));return{houseNumber:T().sumBy(r,"number"),buildNumber:r.length}},getLastQuarterInfo:function(e){var t=D(I()().add(-3,"month")),n=t.thisQuarterStart,r=t.thisQuarterEnd,a=T().filter(e,(function(e){var t=I()(e.beginTime);return t>n&&t<r}));return{houseNumber:T().sumBy(a,"number"),buildNumber:a.length}},sortArea:function(e){return T().sortBy(e,[function(e){return-"天府新区,高新南区,龙泉驿区,金牛区,成华区,武侯区,青羊区,锦江区".indexOf(e)}])},getCurrentQuarter:D,getRandomId:function(){for(var e=[],t=0;t<10;t+=1)e.push("abcdefghijklmnopqrstuvwxyz"[Math.floor(26*Math.random())]);return e.join("")},getBasicColumnGraphData:function(e){var t=T().groupBy(e,(function(e){return e.area})),n=[],r=[];return Object.keys(t).forEach((function(e){var a,u;n.push((a={},d()(a,p.q1,e),d()(a,p.pl,T().sumBy(t[e],"number")),a)),r.push((u={},d()(u,p.q1,e),d()(u,p.$W,t[e].length),u))})),{chartHouseData:n,chartBuilderData:r}},getYearList:function(){for(var e=(new Date).getFullYear(),t=[];e>=2017;)t.push(e),e-=1;return t}},B=BizCharts,S=DataSet;var P=n.n(S),Q=n(6606);const A=(0,Q.n)((function(e){var t=e.data,n=e.title,r=(new(P().View)).source(t);return r.transform({type:"fold",fields:[n],key:"type",value:"value"}),a().createElement(B.Chart,{height:400,data:r,scale:{value:{alias:"数量"},month:{range:[.01,.99],tickCount:9}},forceFit:!0},a().createElement("div",{className:"chart-title"},"".concat(n," / 月(统计图)")),a().createElement(B.Tooltip,{crosshairs:!0}),a().createElement(B.Axis,null),a().createElement(B.Legend,null),a().createElement(B.Geom,{type:"area",position:"month*value",color:"type",shape:"smooth"}),a().createElement(B.Geom,{type:"line",position:"month*value",color:"type",shape:"smooth"}))}));n(5144);var C=n(2307),L=n(1444);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Z=a().useContext;const H=(0,Q.n)((function(){var e=Z(f.I).allData,t=T().groupBy(e,(function(e){return e.area})),n=[{title:"区域",dataIndex:"area",key:"area",filters:Object.keys(t).map((function(e){return{text:e,value:e}})),filterMultiple:!0,onFilter:function(e,t){return 0===t.area.indexOf(e)}},{title:"项目名称",dataIndex:"name",key:"name",render:function(e){return a().createElement(L.Z,{name:e})}},{title:"住房套数",dataIndex:"number",key:"number",sorter:function(e,t){return e.number>t.number}},{title:"登记开始时间",dataIndex:"beginTime",key:"beginTime",sorter:function(e,t){return new Date(e.beginTime).getTime()-new Date(t.beginTime).getTime()}},{title:"登记结束时间",dataIndex:"endTime",key:"endTime",sorter:function(e,t){return new Date(e.endTime).getTime()-new Date(t.endTime).getTime()}},{title:"报名状态",dataIndex:"status",key:"status",filters:[{text:"未报名",value:"未报名"},{text:"正在报名",value:"正在报名"},{text:"报名结束",value:"报名结束"}],filterMultiple:!0,onFilter:function(e,t){return 0===t.status.indexOf(e)},render:function(e){return"报名结束"!==e?a().createElement("span",{style:{color:"green"}},e):e}}],r=e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:e._id},e)}));return a().createElement(C.Z,{title:function(){return"汇总表"},columns:n,dataSource:r,locale:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",emptyText:"暂无数据"}})}));n(9626);var M=n(302),Y=a().useContext;const $=function(){var e=Y(f.I),t=e.allData,n=e.isLoading,r=w.getAllInfo(t),u=w.getThisWeekInfo(t),c=w.getThisMonthInfo(t),i=w.getThisQuarterInfo(t),l=function(e){return a().createElement("div",null,a().createElement("div",{className:"statistic-card-text"},a().createElement("span",null,"".concat(p.$W,"：").concat(e.buildNumber)),a().createElement("span",{style:{color:e.increaseBuildNumber?p.J2:p.TX}},e.increaseBuildNumberString)),a().createElement("div",{className:"statistic-card-text"},a().createElement("span",null,"".concat(p.pl,"：").concat(e.houseNumber)),a().createElement("span",{style:{color:e.increaseHouseNumber?p.J2:p.TX}},e.increaseHouseNumberString)))};return a().createElement(y.default,{gutter:16},a().createElement(v.default,{span:6},a().createElement(M.Z,{title:"本周开盘",bordered:!1,extra:"相比上周"},(0,Q.V)(l(u),n))),a().createElement(v.default,{span:6},a().createElement(M.Z,{title:"本月开盘",bordered:!1,extra:"相比上月"},(0,Q.V)(l(c),n))),a().createElement(v.default,{span:6},a().createElement(M.Z,{title:"本季度开盘",bordered:!1,extra:"相比上季"},(0,Q.V)(l(i),n))),a().createElement(v.default,{span:6},a().createElement(M.Z,{title:"总开盘",bordered:!1},(0,Q.V)(a().createElement("div",null,"".concat(p.$W,"：").concat(r.buildNumber),a().createElement("br",null),"".concat(p.pl,"：").concat(r.houseNumber)),n))))},R=(0,Q.n)((function(e){var t=e.data,n=e.title,r=e.unit,u=e.isLink,c=T().sortBy(t,(function(e){return-e.number})),i=n?"排名：".concat(n):"排名";return a().createElement("div",{className:"rank"},a().createElement("div",{className:"rank-title"},i),a().createElement("ul",{className:"rank-list"},c.map((function(e,t){var n=t<3?"top3":"";return a().createElement("li",{key:e._id},a().createElement("span",{className:n},t+1),a().createElement("span",null,u?a().createElement(L.Z,{name:e.name}):e.name),a().createElement("span",null,e.number+r))}))))})),q=a().memo((K=(0,Q.n)((function(e){var t=e.data,n=e.title,r=e.xAxis,u=e.yAxis,c=[];return e.desc&&(c=t.sort((function(e,t){return t[u]-e[u]}))),a().createElement(B.Chart,{height:400,data:c,forceFit:!0},a().createElement("div",{className:"chart-title"},n),a().createElement(B.Axis,{name:r}),a().createElement(B.Axis,{name:u}),a().createElement(B.Tooltip,null),a().createElement(B.Geom,{type:"interval",position:"".concat(r,"*").concat(u)}))})),V=["data"],function(e){return V.some((function(t){return Array.isArray(e[t])?0===e[t].length:!!e[t]}))?a().createElement("span",null):a().createElement(K,e)}),(function(){return!1}));var K,V,z=a().lazy,F=a().useContext,G=N.default.TabPane,X=O.Z.Content,J=z((function(){return Promise.all([n.e(216),n.e(108)]).then(n.bind(n,2108))}));const U=function(){var e=F(f.I).allData,t=T().groupBy(e,(function(e){return I()(e.beginTime).format("YYYY-MM")})),n=[],r=[];Object.keys(t).sort().forEach((function(e){var a=T().sumBy(t[e],"number");r.push(d()({month:e},p.$W,t[e].length)),n.push(d()({month:e},p.pl,a))}));var u=r.map((function(e){return{_id:w.getRandomId(),name:e.month,number:e[p.$W]}})),c=n.map((function(e){return{_id:w.getRandomId(),name:e.month,number:e[p.pl]}})),i=w.getBasicColumnGraphData(e),l=i.chartHouseData,o=i.chartBuilderData;return a().createElement(X,{className:"content"},a().createElement("div",{className:"content-section"},a().createElement(J,null)),a().createElement("div",{className:"content-statistic-card"},a().createElement($,null)),a().createElement("div",{className:"home-content-houses"},a().createElement(N.default,null,a().createElement(G,{tab:p.pl,key:"1"},a().createElement(y.default,null,a().createElement(v.default,{span:18},a().createElement(A,{data:n,title:p.pl})),a().createElement(v.default,{span:6},a().createElement(R,{data:c,title:"月份",unit:"套"}))),a().createElement("hr",null),a().createElement(q,{title:"房源 / 区域(统计图)",data:l,xAxis:p.q1,yAxis:p.pl,desc:!0})),a().createElement(G,{tab:p.$W,key:"2"},a().createElement(y.default,null,a().createElement(v.default,{span:18},a().createElement(A,{data:r,title:p.$W})),a().createElement(v.default,{span:6},a().createElement(R,{data:u,title:"月份",unit:"个"}))),a().createElement("hr",null),a().createElement(q,{title:"楼盘数 / 区域(统计图)",data:o,xAxis:p.q1,yAxis:p.$W,desc:!0})))),a().createElement("div",{className:"content-section"},a().createElement(H,null)))},ee=function(){return a().createElement(E.rs,null,a().createElement(E.AW,{path:"/",component:U,exact:!0}))};var te=a().lazy,ne=a().Suspense,re=te((function(){return Promise.all([n.e(216),n.e(771)]).then(n.bind(n,1771))}));c().render(a().createElement(ne,{fallback:a().createElement(l.Z,{height:"100vh",tip:p.lL})},a().createElement(g,null,a().createElement(i.VK,null,a().createElement(re,null,a().createElement(ee,null))))),document.getElementById("root"))},3804:e=>{"use strict";e.exports=React},7196:e=>{"use strict";e.exports=ReactDOM}},0,[[2471,666,216]]]);